import{_ as S,r as C,o as _,j as h,A as x,a as I,c as a,d as i,e as o,F as $,f as G,n as k,g as f,G as T,t as d,k as y,p as L,i as N}from"./index-Du3oggm9.js";import{G as j}from"./GlowLines-DRrcTvj8.js";const b=n=>(L("data-v-6d086d31"),n=n(),N(),n),O={class:"relative font-roboto pt-5 lg:mt-8"},z=b(()=>o("h2",{"data-aos":"zoom-out","data-aos-duration":"1000",class:"text-center font-bold text-xl lg:text-2xl"},"Gallery",-1)),A=b(()=>o("h6",{"data-aos":"zoom-out","data-aos-duration":"1000",class:"text-center text-xs font-light sm:text-sm"},"These are some pictures that I illustrated and manipulated, mostly using Photoshop and Illustrator.",-1)),F={class:"flex flex-wrap my-8 gap-6 justify-center"},B={class:"h-full w-full relative rounded-xl bg-stone-900/20 dark:bg-gray-300/20 transition-all duration-300"},D=["onClick","src"],J={class:"absolute bottom-5 right-5 text-3xl"},M=["onClick","title"],V={class:"text-white text-sm"},P=["onClick"],U={class:"bx bx-heart text-7xl relative text-white"},E={class:"text-xl absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-60%]"},q=["onClick"],H=["onClick"],K={__name:"Gallery",emits:["open-modal"],setup(n,{emit:v}){const r=C([]),m=v,g=t=>{m("open-modal",t)};let s=null;_(async()=>{await w()});const w=async()=>{try{const c=(await h.get("https://663b9626fee6744a6ea2331e.mockapi.io/likes")).data.map(e=>({...e,image_url:`/projects/${e.id}.jpg`,liked:JSON.parse(localStorage.getItem(`liked-${e.id}`))||!1,total_likes:e.total_likes||0,animating:!1,unliking:!1}));r.value=c.slice(0,20)}catch(t){console.error("Failed to fetch likes:",t)}},u=t=>{s!==null?(clearTimeout(s),s=null,p(t,!0)):s=setTimeout(()=>{s=null,g(t)},300)},p=async(t,c=!1)=>{const e=t.liked;t.liked=!t.liked,localStorage.setItem(`liked-${t.id}`,JSON.stringify(t.liked)),t.liked&&!e?(t.total_likes+=1,t.animating=!0,setTimeout(()=>{t.animating=!1},1e3)):!t.liked&&e&&(t.total_likes=Math.max(0,t.total_likes-1),t.unliking=!0,setTimeout(()=>{t.unliking=!1},2e3));try{await h.put(`https://663b9626fee6744a6ea2331e.mockapi.io/likes/${t.id}`,{total_likes:t.total_likes,liked_on:new Date().toISOString()})}catch(l){console.error("Failed to update likes on API:",l),t.liked=e,t.total_likes=e?t.total_likes-1:t.total_likes+1,localStorage.setItem(`liked-${t.id}`,JSON.stringify(e))}c&&(r.value=[...r.value])};return _(()=>{x.init()}),I(()=>{x.refresh()}),(t,c)=>(a(),i("section",O,[z,A,o("div",F,[(a(!0),i($,null,G(r.value,e=>(a(),i("div",{"data-aos":"fade-up","data-aos-duration":"1000",key:e.id,class:"relative h-96 basis-full group sm:basis-1/3 lg:basis-1/4 2xl:basis-1/5 flex-grow select-none"},[o("div",B,[o("img",{loading:"lazy",onClick:l=>u(e),src:e.image_url,alt:"image",class:k(["h-full w-full object-cover cursor-pointer transition-all duration-300 p-3 rounded-[20px]",{"opacity-30 grayscale":e.total_likes<1}]),oncontextmenu:"return false;",title:"Double click to like",fetchpriority:"low"},null,10,D),f(T,{animating:e.animating,unliking:e.unliking},null,8,["animating","unliking"]),f(j)]),o("div",J,[e.total_likes>0?(a(),i("button",{key:0,onClick:l=>p(e),class:k([{"text-red-500":e.liked},"like-button flex items-center gap-x-2 lg:opacity-0 lg:group-hover:opacity-100"]),title:e.liked?"Unlike":"Like"},[o("h6",V,d(e.total_likes),1),o("i",{class:k(e.liked?"bx bxs-heart":"bx bx-heart text-white hover:text-red-500 transition-all duration-300")},null,2)],10,M)):y("",!0)]),e.total_likes<1?(a(),i("div",{key:0,onClick:l=>p(e),class:"absolute top-[50%] left-[50%] translate-y-[-50%] translate-x-[-50%] text-lg cursor-pointer transition-opacity"},[o("i",U,[o("span",E,d(e.total_likes),1)])],8,P)):y("",!0),o("h3",{onClick:l=>u(e),class:"absolute top-3 right-0 text-sm text-white uppercase cursor-pointer md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300 pr-5 pl-3 py-1 rounded-l-full bg-gray-900/20 backdrop-blur-md"},d(e.title),9,q),o("h3",{onClick:l=>u(e),class:"absolute bottom-3 left-0 text-sm text-white uppercase cursor-pointer md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300 pl-5 pr-3 py-1 rounded-r-full bg-gray-900/20 backdrop-blur-md"},d(e.date),9,H)]))),128))])]))}},W=S(K,[["__scopeId","data-v-6d086d31"]]);export{W as default};
