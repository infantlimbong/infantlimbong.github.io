import{_ as w,r as S,o as _,i as h,A as f,a as I,c as d,d as u,e as o,F as C,f as $,n as c,g as x,j as G,G as T,t as p,p as L,k as j}from"./index-BaJsHEJa.js";const y=a=>(L("data-v-7aef5fd8"),a=a(),j(),a),N={class:"relative font-roboto pt-5 lg:mt-8"},O=y(()=>o("h2",{"data-aos":"zoom-out","data-aos-duration":"1000",class:"text-center font-bold md:text-lg lg:text-2xl"},"Gallery",-1)),z=y(()=>o("h6",{"data-aos":"zoom-out","data-aos-duration":"1000",class:"text-center text-xs font-light sm:text-sm"},"These are some pictures that I illustrated and manipulated, mostly using Photoshop and Illustrator.",-1)),A={class:"flex flex-wrap my-8 gap-6 justify-center"},F={class:"h-full w-full relative rounded-xl bg-stone-900/20 dark:bg-gray-300/20 transition-all duration-300"},B=["onClick","src"],D={class:"absolute bottom-5 right-5 text-3xl"},J=["onClick","title"],M={class:"text-white text-sm"},P=["onClick"],U=["onClick"],V=["onClick"],E={__name:"Gallery",emits:["open-modal"],setup(a,{emit:b}){const i=S([]),v=b,m=t=>{v("open-modal",t)};let s=null;_(async()=>{await g()});const g=async()=>{try{const r=(await h.get("https://663b9626fee6744a6ea2331e.mockapi.io/likes")).data.map(e=>({...e,image_url:`/projects/${e.id}.jpg`,liked:JSON.parse(localStorage.getItem(`liked-${e.id}`))||!1,total_likes:e.total_likes||0,animating:!1,unliking:!1}));i.value=r.slice(0,20)}catch(t){console.error("Failed to fetch likes:",t)}},n=t=>{s!==null?(clearTimeout(s),s=null,k(t,!0)):s=setTimeout(()=>{s=null,m(t)},300)},k=async(t,r=!1)=>{const e=t.liked;t.liked=!t.liked,localStorage.setItem(`liked-${t.id}`,JSON.stringify(t.liked)),t.liked&&!e?(t.total_likes+=1,t.animating=!0,setTimeout(()=>{t.animating=!1},1e3)):!t.liked&&e&&(t.total_likes=Math.max(0,t.total_likes-1),t.unliking=!0,setTimeout(()=>{t.unliking=!1},2e3));try{await h.put(`https://663b9626fee6744a6ea2331e.mockapi.io/likes/${t.id}`,{total_likes:t.total_likes,liked_on:new Date().toISOString()})}catch(l){console.error("Failed to update likes on API:",l),t.liked=e,t.total_likes=e?t.total_likes-1:t.total_likes+1,localStorage.setItem(`liked-${t.id}`,JSON.stringify(e))}r&&(i.value=[...i.value])};return _(()=>{f.init()}),I(()=>{f.refresh()}),(t,r)=>(d(),u("section",N,[O,z,o("div",A,[(d(!0),u(C,null,$(i.value,e=>(d(),u("div",{"data-aos":"fade-up","data-aos-duration":"1000",key:e.id,class:"relative h-96 basis-full group sm:basis-1/3 lg:basis-1/4 2xl:basis-1/5 flex-grow select-none"},[o("div",F,[o("img",{loading:"lazy",onClick:l=>n(e),src:e.image_url,alt:"image",class:c(["h-full w-full object-cover cursor-pointer transition-all duration-300 p-3 rounded-[24px]",{"opacity-30 grayscale":e.total_likes<1}]),oncontextmenu:"return false;",title:"Double click to like",fetchpriority:"low"},null,10,B),x(G,{animating:e.animating,unliking:e.unliking},null,8,["animating","unliking"]),x(T)]),o("div",D,[o("button",{onClick:l=>k(e),class:c([{"text-red-500":e.liked},"like-button flex items-center gap-x-2 lg:opacity-0 lg:group-hover:opacity-100"]),title:e.liked?"Unlike":"Like"},[o("h6",M,p(e.total_likes),1),o("i",{class:c(e.liked?"bx bxs-heart":"bx bx-heart text-white hover:text-red-500 transition-all duration-300")},null,2)],10,J)]),o("p",{onClick:l=>n(e),class:c([{"opacity-0":e.total_likes>0,"duration-[8s]":e.total_likes<1},"absolute top-[50%] left-[50%] translate-y-[-50%] translate-x-[-50%] text-lg cursor-pointer transition-opacity"])},"Give the first like",10,P),o("h3",{onClick:l=>n(e),class:"absolute top-3 right-0 text-sm text-white uppercase cursor-pointer md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300 pr-5 pl-3 py-1 rounded-l-full bg-gray-900/20 backdrop-blur-md"},p(e.title),9,U),o("h3",{onClick:l=>n(e),class:"absolute bottom-3 left-0 text-sm text-white uppercase cursor-pointer md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-300 pl-5 pr-3 py-1 rounded-r-full bg-gray-900/20 backdrop-blur-md"},p(e.date),9,V)]))),128))])]))}},H=w(E,[["__scopeId","data-v-7aef5fd8"]]);export{H as default};
